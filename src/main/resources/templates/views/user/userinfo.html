<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<th:block th:with="logged_user=${#authentication.principal.user}">

    <style>

        .userinfo{
            margin-top: 50px;
            width: 80%;
            height: auto;
            border: black 1px solid;
            border-radius: 20px;
        }

        .mbties:checked + label {
            background-color: #3498db;
            color: #fff;
        }

    </style>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
        <script th:src="@{/mypage/JS/mypage.js}"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/common.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/mainCarousel.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/mainCardTab.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/mainCard.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/mainCultureSlider.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/common/css/mainMbti.css}">

        <title>Mypage</title>
    </head>

    <script th:inline="javascript">
        // 나중에 댓글 작성시 필요.
        const logged_id = [[${logged_user.userId}]];
    </script>

    <body>
    <!-- 기본해더-->
    <th:block th:insert="~{common/header::header}"></th:block>
    <div class="mypageupdate">
        <button type="button" class="mypage" name="button" value="마이페이지">마이페이지</button>
        <button type="button" class="userinfoupdate" name="button" value="회원정보">회원정보</button>
    </div>

    <div class="userinfo" style="display: flex">
        <img th:src="@{/mypage/image/profile.png}" alt="profile" style="width: 100px; height: 100px;">
        <form th:action="@{/user/userinfo}" method="POST" name="frm3" style="margin-left: 20px;">
            <input type="hidden" name="userId" th:value="${user.userId}"/>
            <div class="username" style="width: unset">
                <label>
                    <span>이메일</span>
                    <input type="text" class="form-control" id="username" name="username" th:value="${username} ? ${username} : ${user.username}" th:readonly="${user.providerId}">
                    <span class="text-danger" th:if="${error_username}" th:utext="${error_username}"></span>
                </label>
            </div>
            <div class="nickname" style="width: unset">
                <label>
                    <span>이름</span>
                    <input type="text" class="form-control" id="nickname" name="nickname" th:value="${nickname} ? ${nickname} : ${user.nickname}" th:readonly="${user.providerId}">
                    <span class="text-danger" th:if="${error_nickname}" th:utext="${error_nickname}"></span>
                </label>
            </div>
<!--            <div class="currentpassword" style="width: unset">-->
<!--                <label>-->
<!--                    <span>현재 비밀번호</span>-->
<!--                    <input type="text" class="form-control" id="password" placeholder="현재 비밀번호를 입력하세요" name="password" th:value="${password}">-->
<!--                </label>-->
<!--            </div>-->
<!--            <div class="newpassword" style="width: unset">-->
<!--                <label>-->
<!--                    <span>새비밀번호</span>-->
<!--                    <input type="text" class="form-control" id="re_password" placeholder="새 비밀번호를 입력하세요" name="re_password" th:value="${re_password}">-->
<!--                </label>-->
<!--            </div>-->
            <div class="mbti" style="width: unset">
                <label>
                    <span>MBTI</span>
                    <input type="radio" class="mbties" id="ESFP" name="mbti" th:value="ESFP" th:checked="${user.mbti == 'ESFP'}">
                    <label for="ESFP">ESFP</label>
                    <input type="radio" class="mbties" id="ENFP" name="mbti" th:value="ENFP" th:checked="${user.mbti == 'ENFP'}">
                    <label for="ENFP">ENFP</label>
                    <input type="radio" class="mbties" id="ISFP" name="mbti" th:value="ISFP" th:checked="${user.mbti == 'ISFP'}">
                    <label for="ISFP">ISFP</label>
                    <input type="radio" class="mbties" id="INFP" name="mbti" th:value="INFP" th:checked="${user.mbti == 'INFP'}">
                    <label for="INFP">INFP</label>
                    <input type="radio" class="mbties" id="ESFJ" name="mbti" th:value="ESFJ" th:checked="${user.mbti == 'ESFJ'}">
                    <label for="ESFJ">ESFJ</label>
                    <input type="radio" class="mbties" id="ENFJ" name="mbti" th:value="ENFJ" th:checked="${user.mbti == 'ENFJ'}">
                    <label for="ENFJ">ENFJ</label>
                    <input type="radio" class="mbties" id="ISFJ" name="mbti" th:value="ISFJ" th:checked="${user.mbti == 'ISFJ'}">
                    <label for="ISFJ">ISFJ</label>
                    <input type="radio" class="mbties" id="INFJ" name="mbti" th:value="INFJ" th:checked="${user.mbti == 'INFJ'}">
                    <label for="INFJ">INFJ</label>
                    <input type="radio" class="mbties" id="ESTP" name="mbti" th:value="ESTP" th:checked="${user.mbti == 'ESTP'}">
                    <label for="ESTP">ESTP</label>
                    <input type="radio" class="mbties" id="ENTP" name="mbti" th:value="ENTP" th:checked="${user.mbti == 'ENTP'}">
                    <label for="ENTP">ENTP</label>
                    <input type="radio" class="mbties" id="ISTP" name="mbti" th:value="ISTP" th:checked="${user.mbti == 'ISTP'}">
                    <label for="ISTP">ISTP</label>
                    <input type="radio" class="mbties" id="INTP" name="mbti" th:value="INTP" th:checked="${user.mbti == 'INTP'}">
                    <label for="INTP">INTP</label>
                    <input type="radio" class="mbties" id="ESTJ" name="mbti" th:value="ESTJ" th:checked="${user.mbti == 'ESTJ'}">
                    <label for="ESTJ">ESTJ</label>
                    <input type="radio" class="mbties" id="ENTJ" name="mbti" th:value="ENTJ" th:checked="${user.mbti == 'ENTJ'}">
                    <label for="ENTJ">ENTJ</label>
                    <input type="radio" class="mbties" id="ISTJ" name="mbti" th:value="ISTJ" th:checked="${user.mbti == 'ISTJ'}">
                    <label for="ISTJ">ISTJ</label>
                    <input type="radio" class="mbties" id="INTJ" name="mbti" th:value="INTJ" th:checked="${user.mbti == 'INTJ'}">
                    <label for="INTJ">INTJ</label>
                </label>
            </div>
            <button type="submit" class="btn btn-outline-dark" th:if="${logged_user.userId == user.userId}">수정완료</button>
        </form>
    </div>
    </body>
</th:block>
</html>